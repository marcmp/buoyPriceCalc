<!DOCTYPE html>
<html lang="es-ca">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculadora Preus Boies Cadaqués 2024</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<script>
// Constants and mappings from your provided code
const providers = ['Promar', 'ServeisDePort', 'Sotamar', 'MesDeMar'];

const BoatSize = {
  SIZE_6: 0,
  SIZE_6_8: 1,
  SIZE_8_10: 2,
  SIZE_10_12: 3,
  SIZE_12_15: 4,
  SIZE_15: 5
};

const Season = {
  SEASON_MID: 0,
  SEASON_PRE: 1,
  SEASON_POST: 2,
};

const SeasonService = {
  SEASON_SERVICE_MID: "SEASON_SERVICE_MID",
  SEASON_SERVICE_PRE_MID: "SEASON_SERVICE_PRE_MID",
  SEASON_SERVICE_MID_POST: "SEASON_SERVICE_MID_POST",
  SEASON_SERVICE_PRE_MID_POST: "SEASON_SERVICE_PRE_MID_POST",
};

const SeasonServiceMapping = {
  [SeasonService.SEASON_SERVICE_MID]: [Season.SEASON_MID],
  [SeasonService.SEASON_SERVICE_PRE_MID]: [Season.SEASON_PRE, Season.SEASON_MID],
  [SeasonService.SEASON_SERVICE_MID_POST]: [Season.SEASON_MID, Season.SEASON_POST],
  [SeasonService.SEASON_SERVICE_PRE_MID_POST]: [Season.SEASON_PRE, Season.SEASON_MID, Season.SEASON_POST]
};

const BoatSizeStringMapping = {
  "< 6 MTS": BoatSize.SIZE_6,
  "6<8 MTS": BoatSize.SIZE_6_8,
  "8<10 MTS": BoatSize.SIZE_8_10,
  "10<12 MTS": BoatSize.SIZE_10_12,
  "12<15 MTS": BoatSize.SIZE_12_15,
  ">15 MTS": BoatSize.SIZE_15
};

const SeasonServiceStringMapping = {
  "1 Juny a 15 Setembre": SeasonService.SEASON_SERVICE_MID,
  "1 Maig a 15 de Setembre": SeasonService.SEASON_SERVICE_PRE_MID,
  "1 Juny a 30 Setembre": SeasonService.SEASON_SERVICE_MID_POST,
  "1 Maig a 30 Setembre": SeasonService.SEASON_SERVICE_PRE_MID_POST
};

// Since the prices are fixed and provided, we can directly include them into the function
function importBuoyPrices() {
  return {
    'Promar': {
      [Season.SEASON_MID]: [1542, 1992, 2391, 2867, 3855, 4730],
      [Season.SEASON_PRE]: [0, 0, 0, 0, 0, 0],
      [Season.SEASON_POST]: [0, 0, 0, 0, 0, 0]
    },
    'ServeisDePort': {
      [Season.SEASON_MID]: [1542, 1992, 2391, 2867, 3855, 4730],
      [Season.SEASON_PRE]: [0, 0, 0, 0, 0, 0],
      [Season.SEASON_POST]: [0, 0, 0, 0, 0, 0]
    },
    'Sotamar': {
      [Season.SEASON_MID]: [1546, 2025, 2450, 2995, 4090, 4990],
      [Season.SEASON_PRE]: [100, 100, 100, 100, 100, 100],
      [Season.SEASON_POST]: [50, 50, 50, 50, 50, 50]
    },
    'MesDeMar': {
      [Season.SEASON_MID]: [2080, 2689, 3227, 3870, 5204, 6385],
      [Season.SEASON_PRE]: [0, 0, 0, 0, 0, 0],
      [Season.SEASON_POST]: [0, 0, 0, 0, 0, 0]
    }
  };
}

function importTaxiPrices() {
  return {
    'Promar': [0, 200, 200],
    'ServeisDePort': [0, 200, 200],
    'Sotamar': [0, 100, 100],
    'MesDeMar': [0, 200, 0]
  };
}

const buoyPrices = importBuoyPrices();
const taxiPrices = importTaxiPrices();

function calculateBuoyPrice(provider, seasonService, boatSize) {
  let totalPrice = 0;
  if (!buoyPrices[provider]) return totalPrice; // Safety check

  SeasonServiceMapping[seasonService].forEach(season => {
    if (buoyPrices[provider][season] && buoyPrices[provider][season][boatSize] !== undefined) {
      totalPrice += buoyPrices[provider][season][boatSize];
    }
  });

  return totalPrice;
}

function calculateTaxiPrice(provider, seasonService) {
  let totalPrice = 0;
  if (!taxiPrices[provider]) return totalPrice; // Safety check

  SeasonServiceMapping[seasonService].forEach(season => {
    if (taxiPrices[provider][season] !== undefined) {
      totalPrice += taxiPrices[provider][season];
    }
  });

  return totalPrice;
}

// Function to handle price calculation
function calculatePrices() {
  const boatSizeValue = document.getElementById('boatSize').value;
  const buoyServiceValue = document.getElementById('buoyService').value;
  const taxiServiceValue = document.getElementById('taxiService').value;

  const boatSize = BoatSizeStringMapping[boatSizeValue];
  const buoyService = SeasonServiceStringMapping[buoyServiceValue];
  const taxiService = SeasonServiceStringMapping[taxiServiceValue];

  providers.forEach(provider => {
    const formattedProviderId = formatProviderId(provider);
    const buoyPrice = calculateBuoyPrice(provider, buoyService, boatSize);
    const taxiPrice = calculateTaxiPrice(provider, taxiService);
    const finalPrice = buoyPrice + taxiPrice;

    document.getElementById(formattedProviderId + 'BuoyPrice').textContent = buoyPrice.toFixed(0) + ' €';
    document.getElementById(formattedProviderId + 'TaxiPrice').textContent = taxiPrice.toFixed(0) + ' €';
    document.getElementById(formattedProviderId + 'TotalPrice').textContent = finalPrice.toFixed(0) + ' €';
  });
}

// A helper function to convert provider names to match the id pattern
function formatProviderId(provider) {
  return provider.charAt(0).toLowerCase() + provider.slice(1);
}

</script>

<body>

<div class="container">
  <div class="row">
    <div class="col-4">
      Quina és la mida de l'embarcació?
      <select id="boatSize" onchange="calculatePrices()" class="form-select" aria-label="Small select example">
        <option selected value="< 6 MTS">&lt; 6 MTS</option>
        <option value="6<8 MTS">6&lt;8 MTS</option>
        <option value="8<10 MTS">8&lt;10 MTS</option>
        <option value="10<12 MTS">10&lt;12 MTS</option>
        <option value="12<15 MTS">12&lt;15 MTS</option>
        <option value=">15 MTS">&gt; 15 MTS</option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-4">
      En quin període utilitzaràs la boia?
      <select id="buoyService" onchange="calculatePrices()" class="form-select" aria-label="Small select example">
        <option selected value="1 Maig a 15 de Setembre">1 Maig a 15 de Setembre</option>
        <option value="1 Juny a 15 Setembre">1 Juny a 15 Setembre</option>
        <option value="1 Juny a 30 Setembre">1 Juny a 30 Setembre</option>
        <option value="1 Maig a 30 Setembre">1 Maig a 30 Setembre</option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-4">
      En quin període utilitzaras el taxi?
      <select id="taxiService" onchange="calculatePrices()" class="form-select" aria-label="Small select example">
        <option selected value="1 Juny a 15 Setembre">1 Juny a 15 Setembre</option>
        <option value="1 Maig a 15 de Setembre">1 Maig a 15 de Setembre</option>
        <option value="1 Juny a 30 Setembre">1 Juny a 30 Setembre</option>
        <option value="1 Maig a 30 Setembre">1 Maig a 30 Setembre</option>
      </select>
    </div>
  </div>
  <div class="row my-4">
    <div class="col-12">
      <h2 class="text-center mt-5 mb-3">Comparativa Preus</h2>
    </div>
  </div>
</div>

<!-- Table to display the prices -->
<table class="table" id="priceTable">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">TOTAL</th>
      <td>=</td>
      <th scope="col">preu Boia</th>
      <td>+</td>
      <th scope="col">preu Taxi</th>
    </tr>
  </thead>
  <tbody class="table-group-divider">
    <tr>
      <td>Promar</td>
      <td id="promarTotalPrice">-</td>
      <td>=</td>
      <td id="promarBuoyPrice">-</td>
      <td>+</td>
      <td id="promarTaxiPrice">-</td>
    </tr>
    <tr>
      <td>Serveis De Port</td>
      <td id="serveisDePortTotalPrice">-</td>
      <td>=</td>
      <td id="serveisDePortBuoyPrice">-</td>
      <td>+</td>
      <td id="serveisDePortTaxiPrice">-</td>
    </tr>
    <tr>
      <td>Sotamar</td>
      <td id="sotamarTotalPrice">-</td>
      <td>=</td>
      <td id="sotamarBuoyPrice">-</td>
      <td>+</td>
      <td id="sotamarTaxiPrice">-</td>
    </tr>
    <tr>
      <td>Mes De Mar (Portlligat)</td>
      <td id="mesDeMarTotalPrice">-</td>
      <td>=</td>
      <td id="mesDeMarBuoyPrice">-</td>
      <td>+</td>
      <td id="mesDeMarTaxiPrice">-</td>
    </tr>
  </tbody>
</table>

<div class="row my-4">
  <div class="col-12">
    <h2 class="text-center mt-5 mb-3">Planol situació concessió</h2>
  </div>
</div>
<img src="planolConcessionaries.jpg" class="img-fluid" alt="...">

<div class="row my-4">
  <div class="col-12">
    <h2 class="text-center">AUEECAD - Associació d'Usuaris d'Embarcacions d'Esbarjo de Cadaqués </h2>
  </div>
</div>





<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>


</html>
